<? var headerAppUrl = typeof appUrl !== 'undefined' ? appUrl : getUrl(); ?>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLMD/CDt3uWn+Z2uKDAzG4/iU4/wKwFq0s1s2rL2I/D6hK9V/D2t4vE5G/W+y1H0w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  :root {
    --primary-color: #008891;
    --primary-dark: #006d75;
    --primary-light: #00a0a9;
    --text-dark: #2c3f3f;
    --bg-light: #f8f9fa;
    --shadow-medium: 0 4px 15px rgba(0, 0, 0, 0.15);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .shared-header-wrapper {
    font-family: 'Cairo', sans-serif;
    margin: 20px auto 30px;
    max-width: 1200px;
  }

  .icon-nav {
    display: flex;
    justify-content: center;
    background: var(--primary-color);
    padding: 10px 15px;
    border-radius: 0 0 15px 15px;
    box-shadow: var(--shadow-medium);
    gap: 10px;
    flex-wrap: wrap;
  }

  .icon-nav-item {
    text-align: center;
    padding: 8px 18px;
    cursor: pointer;
    font-size: 14px;
    color: rgba(255, 255, 255, 0.9);
    transition: var(--transition);
    border: none;
    background: transparent;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
  }

  .icon-nav-item i {
    display: block;
    font-size: 20px;
  }

  .icon-nav-item:hover {
    color: #fff;
    opacity: 0.85;
  }

  .icon-nav-item.active {
    background-color: var(--primary-dark);
    color: #fff;
    border-radius: 10px;
    padding: 10px 20px;
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  }

  @media (max-width: 768px) {
    .icon-nav {
      border-radius: 0 0 10px 10px;
    }

    .icon-nav-item {
      flex: 1 1 calc(50% - 10px);
    }
  }
</style>

<div class="shared-header-wrapper" dir="rtl">
  <div class="icon-nav" id="ghada-nav-bar">
    <button class="icon-nav-item" data-page="index">
      <i class="fas fa-home"></i>
      <span>إضافة حجز</span>
    </button>
    <button class="icon-nav-item" data-page="Add-client">
      <i class="fas fa-user-plus"></i>
      <span>إضافة عميل</span>
    </button>
    <button class="icon-nav-item" data-page="add-tour">
      <i class="fas fa-route"></i>
      <span>إضافة رحلة</span>
    </button>
    <button class="icon-nav-item" data-page="add-hotel">
      <i class="fas fa-hotel"></i>
      <span>إضافة فندق</span>
    </button>
    <button class="icon-nav-item" data-page="manage-reservations">
      <i class="fas fa-folder-open"></i>
      <span>إدارة الحجوزات</span>
    </button>
      <button class="icon-nav-item" data-page="SUPPLIER" data-role="management">
      <i class="fas fa-box-open"></i>
      <span>مزودي الخدمة</span>
    </button>
      <button class="icon-nav-item" data-page="mediator" data-role="management">
      <i class="fas fa-user-friends"></i>
      <span>الوسطاء</span>
    </button>
      <button class="icon-nav-item" data-page="manage-statistics" data-role="management">
      <i class="fas fa-chart-line"></i>
      <span>لوحة الإحصائيات</span>
    </button>
    <button class="icon-nav-item" data-page="logout">
      <i class="fas fa-right-from-bracket"></i>
      <span>تسجيل الخروج</span>
    </button>
  </div>
</div>

<script>
  (function () {
    const baseUrl = '<?= headerAppUrl ?>';
      const userRole = ('<?= userRole ?>' || 'employee').toLowerCase();
      const managementRoles = ['admin','owner','developer','accountant'];
      const hasFullAccess = managementRoles.includes(userRole);
    const body = document.body;
    if (!body.dataset.page) {
      body.dataset.page = 'index';
    }

    document.querySelectorAll('.icon-nav-item').forEach(item => {
      const requiredRole = item.dataset.role;
        if (requiredRole === 'management' && !hasFullAccess) {
        item.remove();
        return;
      }

      if (item.dataset.page === body.dataset.page) {
        item.classList.add('active');
      }

      item.addEventListener('click', () => {
        const targetPage = item.dataset.page;
        if (!targetPage) return;

        const targetUrl = (targetPage === 'index')
          ? baseUrl
          : `${baseUrl}?page=${targetPage}`;

        window.top.location.href = targetUrl;
      });
    });
  })();
</script>
